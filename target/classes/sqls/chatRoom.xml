<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
	"http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<!-- 

create table chatRoom(
	roomName varchar(50) not null,
    descriptions varchar(100),
    roomNumber int not null auto_increment,
    members varchar(100) not null,
	createdBy varchar(45),
    createdAt datetime,
    primary key (roomNumber)
);

 -->
<mapper namespace="ChatRoom">
	<insert id="createChatRoom" parameterType="mul.cam.a.dto.ChatRoomDto">
		insert into chatRoom(roomName, descriptions, members, createdBy, createdAt)
		values(#{roomName}, #{descriptions}, #{members}, #{createdBy}, now())
	</insert>
	<select id="printAllChatRoom" resultType="mul.cam.a.dto.ChatRoomDto" parameterType="String">
		select roomName, descriptions, roomNumber, members, createdBy, createdAt
		from chatRoom
		where members like concat("%/",#{userId},"/%")
	</select>
	<select id="chatRoomInfo" resultType="mul.cam.a.dto.ChatRoomDto" parameterType="String">
		select roomName, descriptions, roomNumber, members, createdBy, createdAt
		from chatRoom
		where roomNumber=#{roomNumber}
	</select>
</mapper>
